document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/gh/modweeb-widget/modweeb-tools@main/image-optimizer/image-optimizer.css",document.head.appendChild(e);const t=document.getElementById("image-optimizer-anchor")||document.body;t&&(t.innerHTML=`<div class=heroBox><div class=BoxTool id=imageOptimizerTool><p class="title dt" style=font-weight:700;font-size:16px;margin-bottom:8px><b>أداة تحسين الصور</b></p><div class=container><p style=margin:0 0 16px;color:var(--bodyC);font-size:13px;opacity:.8>ارفع صورة، غيّر الأبعاد، اختر الصيغة والجودة، وأضف علامة مائية — ثم حمّل الصورة المحسنة.</p><div class=upload-container><div class=upload-controls><label style="font-size:13px;font-weight:500;display:block;margin-bottom:10px">اختر صورة: <input id=imgFile type=file accept=image/* class=at_input></label><div class=upload-info>سحب وإفلات مدعوم داخل المربع أدناه</div><div class=reset-btn-container><button id=resetBtn type=button class="button reset-btn">إعادة ضبط</button></div></div></div><div id=dropZone class=drop-zone>اسحب الصورة وأفلتها هنا أو استخدم زر الاختيار أعلاه</div><div class=preview-panel><div class=preview-title>معاينة سريعة</div><div id=previewWrap class=preview-container><img id=previewImg src alt=Preview><div id=emptyPreview>لا توجد صورة بعد — ارفع صورة لعرض المعاينة</div></div><div class=size-info><div>الحجم الأصلي: <span id=origSize>-</span></div><div>الحجم بعد التحسين: <span id=resultSize>-</span></div><div id=resultFormat></div></div></div><hr style=margin:20px 0><div class=optimizer-layout><div class=controls-panel><b class=section-title>خيارات التحسين</b><div class=format-quality-grid><label>صيغة الإخراج: <select id=outFormat class=at_input><option value=image/jpeg>JPG</option><option value=image/png>PNG</option><option value=image/webp>WEBP</option></select></label><label>جودة (Quality): <input id=quality type=range min=20 max=100 value=85 oninput='document.getElementById("qv").innerText=this.value'><div class=quality-value>القيمة: <span id=qv>85</span>%</div></label></div><div class=size-controls><b class=section-title>تغيير الأبعاد (اختياري)</b><label>عرض (Width): <input id=widthInput type=number min=1 class=at_input placeholder=الأصلية></label><label>ارتفاع (Height): <input id=heightInput type=number min=1 class=at_input placeholder=الأصلية></label><label class=aspect-ratio-label style=font-size:13px;margin-top:8px;display:block><input id=keepAspect type=checkbox checked>الحفاظ على نسبة العرض إلى الارتفاع</label></div><hr><b class=section-title>العلامة المائية (Watermark)</b><label>نوع العلامة: <select id=wmType class=at_input><option value=text>نص عادي</option><option value=rectangular>شريط مستطيل</option><option value=rounded>شريط مستدير الحواف</option><option value=slanted>شريط مائل</option><option value=gradient>شريط متدرج</option></select></label><div id=textWatermarkControls><label>نص العلامة المائية: <input id=wmText placeholder="نص العلامة المائية (اختياري)" class=at_input></label></div><div id=barWatermarkControls style=display:none><label>لون خلفية الشريط (الأساسي): <input id=wmBarBgColor type=color value=#000000 class=at_input style=height:40px></label><label id=wmBarGradientColorLabel style=display:none>لون التدرج (ثانوي): <input id=wmBarGradientColor type=color value=#ffffff class=at_input style=height:40px></label><label class=aspect-ratio-label style=font-size:13px;margin-top:8px;display:block><input id=wmBarBorderEnabled type=checkbox> إضافة حدود</label><label id=wmBarBorderColorLabel style=display:none>لون الحدود: <input id=wmBarBorderColor type=color value=#ffffff class=at_input style=height:40px></label></div><div class=watermark-controls><label>موضع العلامة: <select id=wmPos class=at_input><option value=bottom-right>أسفل اليمين</option><option value=bottom-left>أسفل اليسار</option><option value=top-right>أعلى اليمين</option><option value=top-left>أعلى اليسار</option><option value=center id=centerOption>وسط الصورة</option></select></label><label class=text-size-label>حجم العلامة (px): <input id=wmSize type=number value=20 min=8 class=at_input></label></div><hr><div class=action-buttons><button id=processBtn type=button class=button>تحسين الصورة</button><button id=downloadBtn type=button class="button secondary" disabled>تحميل الصورة</button><button id=previewOpenBtn type=button class="button light" disabled>فتح المعاينة</button></div><div id=infoBox class=info-box></div></div></div></div><div class=tool-footer><div class=tool-footer-inner><svg viewBox="0 0 514 514" class=logo-icon aria-hidden=true focusable=false><path class=part1 fill=rgba(225,20,98,0.9) d="M195 167.9c-3.4 1.7-8 7.3-28 33.2l-8.8 11.5 14 18.2 14 18.2 3.8-3.4c6.6-6 14.2-7 21.3-2.8 2.5 1.5 19 22.2 68 85.9 6.5 8.4 13 16 14.5 17.1 6.5 4.5 15.5 5.5 20.2 2.2 2.7-1.9 43-53 43-54.5a301 301 0 0 0-24.2-30.3c-.5.2-5.5 6.4-11.1 13.7-9.5 12.4-13 16.2-14 15L273 247c-58.8-76.2-59.3-76.8-63.1-79a15.7 15.7 0 0 0-15-.1"/><path class=part2 fill=rgba(111,202,220,0.9) d="M104 180.4c-2 1.3-4.8 4.6-6.3 7.4-5.7 10.6-4.6 20.3 3.7 31C182 322.5 204.4 351 206.1 352c7 3.7 12.7 2.8 18-2.8a948 948 0 0 0 29.2-37c.6-.8-3-6-11.3-16.8L230 280l-4.5 3.2c-8.6 6.1-19.4 4.8-27-3.4-1.7-1.8-19.4-24.3-39.3-50a1327.4 1327.4 0 0 0-39.2-49.2c-4.1-3.5-11-3.6-16-.2"/><path class=part3 fill=rgba(61,184,143,0.9) d="M312 173.6c-2 1.2-35.7 43.5-42.7 53.4-1 1.5.4 3.8 10.3 16.6l12.4 15.7a87 87 0 0 0 13-15c6.7-8.7 12.8-15.8 13.5-15.8 1.3 0 39 47.6 44.2 56a950 950 0 0 0 35.7 45.4c3 2.4 10.8 2.6 15.2.3 10-5.1 16.2-17.1 13.4-25.6-.6-1.9-9.5-14.3-19.8-27.5L362.5 220a1046 1046 0 0 1-29-38.4c-4.1-6.6-8.5-9.5-14.4-9.5-2.5 0-5.7.8-7.1 1.6"/><path class=part4 fill=rgba(233,169,32,0.9) d="M106.8 282.6c-24.2 31.2-24.8 32-26.3 36.4a26.2 26.2 0 0 0 4.1 24.5c4.7 6.2 12 8.2 18.3 5a830 830 0 0 0 43.3-54c.6-1.1-21.2-30.7-23.2-31.4a191 191 0 0 0-16.2 19.5m298.8-118c-3 .8-8.8 4.8-12.2 8.4a446.8 446.8 0 0 0-26.1 38c-.3 1.1 4 7.6 11.4 17.3 11 14.7 11.9 15.5 13.3 13.7l14-20a4025 4025 0 0 1 16.2-23.3c8.5-12 7-28.6-2.9-33.3a26 26 0 0 0-13.7-.8"/></svg><span>Made with <span class=heart>❤</span> by <strong>ModWeeb</strong></span></div></div></div></div>`);const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/modweeb-widget/modweeb-tools@main/image-optimizer/image-optimizer.js",document.body.appendChild(n)});
